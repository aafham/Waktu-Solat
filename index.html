<!doctype html>
<html lang="ms">
  <head>
    <link rel='apple-touch-icon' href='icons/apple-touch-icon.png'>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Waktu Solat Malaysia</title>
    <meta name="theme-color" content="#1f7a54" />
    <link rel="manifest" href="manifest.json" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Fraunces:wght@500;700&family=Karla:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <main class="page">
      <header class="hero">
        <div>
          <p class="eyebrow">Waktu Solat Malaysia</p>
          <h1 id="heroTitle">Waktu Solat</h1>
          <p class="lead">
            Data rasmi JAKIM dengan pengesanan lokasi automatik, kiraan solat
            seterusnya, dan kompas kiblat yang mudah digunakan.
          </p>
        </div>
        <div class="hero-card">
          <div class="date-clock-row">
            <div class="date-block">
              <div>
                <p class="label">Tarikh Masihi</p>
                <p id="gregorianDate" class="value">&mdash;</p>
              </div>
              <div>
                <p class="label">Tarikh Hijrah</p>
                <p id="hijriDate" class="value">&mdash;</p>
              </div>
            </div>
            <div class="analog-clock" aria-label="Jam analog masa semasa" role="img">
              <div class="clock-face">
                <div class="clock-tick major top"></div>
                <div class="clock-tick major right"></div>
                <div class="clock-tick major bottom"></div>
                <div class="clock-tick major left"></div>
                <div class="hand hour" id="clockHour"></div>
                <div class="hand minute" id="clockMinute"></div>
                <div class="hand second" id="clockSecond"></div>
                <div class="clock-center"></div>
              </div>
            </div>
          </div>
          <div class="toggle-row">
            <div class="status-pill" id="locationStatus">Lokasi belum dipilih</div>
            <button id="settingsBtn" class="icon-button" type="button" aria-label="Buka tetapan">
              <span class="icon">&#9881;&#65039;</span>
              <span class="icon-label" id="settingsBtnLabel">Tetapan</span>
            </button>
          </div>
        </div>
      </header>

      <section class="controls">
        <div class="location-card">
          <div>
            <p class="label">Lokasi Semasa</p>
            <p id="locationName" class="location-name">Belum ditetapkan</p>
            <p id="locationMeta" class="muted">Sila kesan lokasi atau pilih manual.</p>
          </div>
          <div class="button-row">
            <button id="detectBtn" class="primary">Detect Lokasi Saya</button>
            <button id="manualToggle" class="ghost">Pilih Lokasi Secara Manual</button>
          </div>
        </div>

        <div id="manualPanel" class="manual-panel hidden">
          <div class="field">
            <label for="stateSelect">Negeri</label>
            <select id="stateSelect">
              <option value="">Pilih negeri</option>
            </select>
          </div>
          <div class="field">
            <label for="zoneSelect">Zon / Wilayah Solat</label>
            <select id="zoneSelect" disabled>
              <option value="">Pilih zon</option>
            </select>
          </div>
          <button id="applyZone" class="primary">Papar Waktu Solat</button>
          <p id="manualHint" class="muted small">
            Senarai zon dimuat dari data rasmi JAKIM. Jika gagal dimuat, periksa
            sambungan internet.
          </p>
        </div>
      </section>

      <section class="next-prayer">
        <div>
          <p class="label">Waktu Solat Seterusnya</p>
          <h2 id="nextPrayerName">&mdash;</h2>
          <p id="nextPrayerTime" class="muted">&mdash;</p>
        </div>
        <div class="countdown">
          <p class="label">Kiraan Masa</p>
          <p id="countdownValue" class="countdown-value">--:--:--</p>
          <p id="currentTime" class="muted small">&mdash;</p>
        </div>
      </section>

      <section class="prayer-grid" id="prayerGrid">
        <!-- Cards injected by JS -->
      </section>

      <section class="qibla-card">
        <div class="qibla-info">
          <p class="label" id="qiblaLabel">Kompas Kiblat</p>
          <h2 id="qiblaTitle">Arah Kaabah</h2>
          <p id="qiblaStatus" class="muted">
            Aktifkan kompas dan benarkan lokasi untuk ketepatan terbaik.
          </p>
          <div id="qiblaIndicator" class="qibla-indicator">ðŸ”´ Tidak aktif</div>
          <div class="button-row">
            <button id="compassBtn" class="primary">Aktifkan Kompas</button>
          </div>
          <p class="muted small" id="qiblaHelp">
            Cara guna: Pegang telefon rata. Arah anak panah menunjuk ke Kaabah.
          </p>
        </div>
        <div class="compass">
          <div class="compass-ring">
            <div class="compass-marker north">N</div>
            <div class="compass-marker east">E</div>
            <div class="compass-marker south">S</div>
            <div class="compass-marker west">W</div>
            <div class="needle" id="qiblaNeedle"></div>
          </div>
          <p class="angle-readout"><span id="qiblaAngle">&mdash;</span>&deg;</p>
        </div>
      </section>

      <div id="settingsModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
        <div class="modal-panel">
          <div class="modal-header">
            <h3 id="settingsTitle">Tetapan</h3>
            <button id="settingsClose" class="icon-button" type="button" aria-label="Tutup tetapan">
              <span class="icon">&#10005;</span>
            </button>
          </div>
          <div class="modal-body">
            <label class="toggle lang-toggle">
              <span id="langLabel">Bahasa</span>
              <div class="segmented" id="langToggle" role="group" aria-label="Tukar bahasa">
                <button id="langMs" class="segmented-btn" type="button" data-lang="ms">BM</button>
                <button id="langEn" class="segmented-btn" type="button" data-lang="en">EN</button>
              </div>
            </label>
            <button
              id="themeToggle"
              class="theme-toggle"
              type="button"
              role="switch"
              aria-checked="false"
              aria-label="Tukar mode gelap"
            >
              <span class="toggle-track">
                <span class="toggle-thumb"></span>
              </span>
              <span class="toggle-text">Mode Gelap</span>
            </button>
            <button id="clearCacheBtn" class="ghost danger" type="button">
              Reset Cache Aplikasi
            </button>
          </div>
        </div>
      </div>

      <footer class="footer">
        <p class="muted small">
          Sumber data: JAKIM e-Solat dan Malaysia Waktu Solat API.
        </p>
      </footer>
    </main>

    <script src="script.js"></script>
  </body>
</html>
